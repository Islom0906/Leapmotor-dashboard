"use strict";(self.webpackChunkcrema=self.webpackChunkcrema||[]).push([[345],{68438:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(74165),a=r(15861),s=r(74569),c=r.n(s);c().defaults.baseURL="".concat("https://leapmotorca.uz/api"),c().interceptors.request.use((function(e){var t=function(e){try{return localStorage.getItem(e)}catch(t){console.log("Error getting data")}}("lptoken"),r=null!==t?"Bearer ".concat(t):"";return e.headers.authorization=r,e}));var o=c(),u={getData:function(e){return(0,a.Z)((0,n.Z)().mark((function t(){var r,a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.get(e);case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()},getDataByID:function(e,t){return(0,a.Z)((0,n.Z)().mark((function r(){var a,s;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.get("".concat(e,"/").concat(t));case 2:return a=r.sent,s=a.data,r.abrupt("return",s);case 5:case"end":return r.stop()}}),r)})))()},postData:function(e,t){return(0,a.Z)((0,n.Z)().mark((function r(){var a,s;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.post(e,t);case 2:return a=r.sent,s=a.data,r.abrupt("return",s);case 5:case"end":return r.stop()}}),r)})))()},editData:function(e,t,r){return(0,a.Z)((0,n.Z)().mark((function a(){var s,c;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.put("".concat(e,"/").concat(r),t);case 2:return s=n.sent,c=s.data,n.abrupt("return",c);case 5:case"end":return n.stop()}}),a)})))()},deleteData:function(e,t){return(0,a.Z)((0,n.Z)().mark((function r(){return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.delete("".concat(e,"/").concat(t));case 2:case"end":return r.stop()}}),r)})))()},deleteImages:function(e,t){return(0,a.Z)((0,n.Z)().mark((function r(){return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("delete image",t),r.next=3,o.delete(e,{ids:["64f0ffa5883c58f0433c44d9"]});case 3:case"end":return r.stop()}}),r)})))()}}},95345:function(e,t,r){r.r(t);var n=r(29439),a=r(72791),s=r(2409),c=r(50419),o=r(66106),u=r(30914),i=r(49389),l=r(87309),d=r(91933),f=r(68438),m=r(98986),p=r(57689),Z=r(16030),g=r(77221),h=r(80184),x={tel:"",facebook:"",twitter:"",instagram:""};t.default=function(){var e=s.Z.useForm(),t=(0,n.Z)(e,1)[0],r=(0,p.s0)(),v=(0,Z.v9)((function(e){return e.editData})).editId,b=(0,Z.I0)(),w=(0,d.useMutation)((function(e){var t=e.url,r=e.data;return f.Z.postData(t,r)}),{onSuccess:function(){c.ZP.success("Success")},onError:function(e){c.ZP.error(e)}}),j=w.mutate,k=w.data,I=w.isLoading,y=w.isSuccess,F=w.error,E=w.isError,S=(0,d.useQuery)(["edit-contact"],(function(){return f.Z.getData("/contact")}),{enabled:!1}),D=S.isLoading,V=S.data,L=S.refetch,P=S.isSuccess,q=S.error,C=S.isError,T=(0,d.useMutation)((function(e){var t=e.url,r=e.data,n=e.id;return f.Z.editData(t,r,n)})),z=T.mutate,B=T.isLoading,J=T.data,M=T.isSuccess;(0,a.useEffect)((function(){M&&b({type:g.Pb,payload:""}),(y||M)&&r("/contact")}),[k,J]),(0,a.useEffect)((function(){E&&c.ZP.error(F.message),C&&c.ZP.error(q.message)}),[F,q]),(0,a.useEffect)((function(){""!==v&&L()}),[v]),(0,a.useEffect)((function(){""===v&&t.setFieldsValue(x)}),[]),(0,a.useEffect)((function(){if(P){var e={tel:V.tel,facebook:V.facebook,twitter:V.twitter,instagram:V.instagram};t.setFieldsValue(e)}}),[V]);return(0,a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("myFormValues"));e&&(e.images=[],t.setFieldsValue(e));var r=function(){localStorage.setItem("myFormValues",JSON.stringify(t.getFieldsValue()))};return window.addEventListener("beforeunload",r),function(){localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",r)}}),[]),(0,h.jsx)("div",{children:I||D||B?(0,h.jsx)(m.QP,{}):(0,h.jsxs)(s.Z,{form:t,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:x,onFinish:function(e){P?z({url:"/contact",id:v,data:e}):j({url:"/contact",data:e})},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[(0,h.jsxs)(o.Z,{gutter:20,children:[(0,h.jsx)(u.Z,{span:12,children:(0,h.jsx)(s.Z.Item,{label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",name:"tel",rules:[{required:!0,message:"\u0412\u0432\u043e\u0434 \u043d\u043e\u043c\u0435\u0440\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d"}],children:(0,h.jsx)(i.Z,{})})}),(0,h.jsx)(u.Z,{span:12,children:(0,h.jsx)(s.Z.Item,{label:"Facebook",name:"facebook",rules:[{required:!0,message:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 Facebook \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430"}],children:(0,h.jsx)(i.Z,{})})})]}),(0,h.jsxs)(o.Z,{gutter:20,children:[(0,h.jsx)(u.Z,{span:12,children:(0,h.jsx)(s.Z.Item,{label:"Telegram",name:"twitter",rules:[{required:!0,message:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 Telegram"}],children:(0,h.jsx)(i.Z,{})})}),(0,h.jsx)(u.Z,{span:12,children:(0,h.jsx)(s.Z.Item,{label:"Instagram",name:"instagram",rules:[{required:!0,message:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0418\u043d\u0441\u0442\u0430\u0433\u0440\u0430\u043c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430"}],children:(0,h.jsx)(i.Z,{})})})]}),(0,h.jsx)(l.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:P?"Edit":"Add"})]})})}},30914:function(e,t,r){var n=r(89752);t.Z=n.Z}}]);
//# sourceMappingURL=345.a86ebbdb.chunk.js.map