"use strict";(self.webpackChunkcrema=self.webpackChunkcrema||[]).push([[238],{53016:(e,a,t)=>{t.d(a,{Z:()=>i});t(72791);var n=t(2409),s=t(49389),r=t(80184);const i=e=>{let{label:a,name:t,required:i,required_text:o}=e;return(0,r.jsx)(n.Z.Item,{label:a,name:t,rules:[{required:i,message:o}],children:(0,r.jsx)(s.default,{})})}},68438:(e,a,t)=>{t.d(a,{Z:()=>i});var n=t(74569),s=t.n(n);s().defaults.baseURL="".concat("https://andijon.leapmotorca.uz/api"),s().interceptors.request.use((e=>{const a=(e=>{try{return localStorage.getItem(e)}catch(a){console.log("Error getting data")}})("lptoken"),t=null!==a?"Bearer ".concat(a):"";return e.headers.authorization=t,e}));const r=s(),i={async getData(e){const{data:a}=await r.get(e);return a},async getDataByID(e,a){const{data:t}=await r.get("".concat(e,"/").concat(a));return t},async postData(e,a){const{data:t}=await r.post(e,a);return t},async editData(e,a,t){const{data:n}=await r.put("".concat(e,"/").concat(t),a);return n},async deleteData(e,a){await r.delete("".concat(e,"/").concat(a))},async deleteImages(e,a){await r.delete(e,{data:a})}}},7238:(e,a,t)=>{t.r(a),t.d(a,{default:()=>y});var n=t(72791),s=t(2409),r=t(50419),i=t(66106),o=t(30914),c=t(87309),l=t(91933),d=t(68438),u=t(98986),m=t(57689),p=t(16030),g=t(77221),h=t(53016),f=t(68747),Z=t(80184);const x={nameUz:"",nameRu:"",dealers:[{nameUz:"",nameRu:""}]},y=()=>{const[e]=s.Z.useForm(),a=(0,m.s0)(),{editId:t}=(0,p.v9)((e=>e.editData)),y=(0,p.I0)(),{mutate:j,data:b,isLoading:v,isSuccess:w}=(0,l.useMutation)((e=>{let{url:a,data:t}=e;return d.Z.postData(a,t)}),{onSuccess:()=>{r.ZP.success("Success")},onError:e=>{for(let a in e.response.data)r.ZP.error("".concat(a,": ").concat(e.response.data[a][0]))}}),{isLoading:z,data:S,refetch:q,isSuccess:D}=(0,l.useQuery)(["edit-region",t],(()=>d.Z.getDataByID("/region",t)),{enabled:!1}),{mutate:F,isLoading:I,data:E,isSuccess:R}=(0,l.useMutation)((e=>{let{url:a,data:t,id:n}=e;return d.Z.editData(a,t,n)}),{onSuccess:()=>{r.ZP.success("Success")},onError:e=>{for(let a in e.response.data)r.ZP.error("".concat(a,": ").concat(e.response.data[a][0]))}});(0,n.useEffect)((()=>{R&&y({type:g.Pb,payload:""}),(w||R)&&a("/region")}),[b,E]),(0,n.useEffect)((()=>{""!==t&&q()}),[t]),(0,n.useEffect)((()=>{""===t&&e.setFieldsValue(x)}),[]),(0,n.useEffect)((()=>{const a=[];if(null===S||void 0===S||S.dealers.map((e=>{const t={nameUz:e.nameUz,nameRu:e.nameRu};a.push(t)})),D){const t={nameUz:S.nameUz,nameRu:S.nameRu,dealers:a};e.setFieldsValue(t)}}),[S]);return(0,n.useEffect)((()=>{const a=JSON.parse(localStorage.getItem("myFormValues"));a&&(a.images=[],e.setFieldsValue(a));const t=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",t),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",t)}}),[]),(0,Z.jsx)("div",{children:v||z||I?(0,Z.jsx)(u.QP,{}):(0,Z.jsxs)(s.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:x,onFinish:e=>{S?F({url:"/region",data:e,id:t}):j({url:"/region/",data:e})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,Z.jsxs)(i.Z,{gutter:20,children:[(0,Z.jsx)(o.Z,{span:12,children:(0,Z.jsx)(h.Z,{required:!0,required_text:"To'ldirish talab qilinadi",label:"Viloyat nomi Uz",name:"nameUz"})}),(0,Z.jsx)(o.Z,{span:12,children:(0,Z.jsx)(h.Z,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",label:"\u041f\u0440\u043e\u0432\u0438\u043d\u0446\u0438\u044f Ru",name:"nameRu"})})]}),(0,Z.jsx)(s.Z.List,{name:"dealers",children:(e,a)=>{let{add:t,remove:n}=a;return(0,Z.jsxs)(Z.Fragment,{children:[e.map(((e,a)=>(0,Z.jsxs)("div",{style:{marginBottom:20},children:[(0,Z.jsxs)(i.Z,{gutter:20,children:[(0,Z.jsx)(o.Z,{span:11,offset:1,children:(0,Z.jsx)(h.Z,{required:!0,required_text:"To'ldirish talab qilinadi",label:"Dealerni nomini kiriting Uz ".concat(a+1),name:[e.name,"nameUz"]})}),(0,Z.jsx)(o.Z,{span:11,children:(0,Z.jsx)(h.Z,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0434\u0438\u043b\u0435\u0440\u0430 Ru ".concat(a+1),name:[e.name,"nameRu"]})})]}),(0,Z.jsx)(f.Z,{onClick:()=>n(e.name)})]},e.fieldKey))),(0,Z.jsx)(s.Z.Item,{children:(0,Z.jsx)(c.Z,{type:"primary",onClick:()=>t(),block:!0,style:{backgroundColor:"#28a745"},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0433\u043e \u0434\u0438\u043b\u0435\u0440\u0430"})})]})}}),(0,Z.jsx)(c.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:D?"Edit":"Add"})]})})}},68747:(e,a,t)=>{t.d(a,{Z:()=>c});var n=t(1413),s=t(72791);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};var i=t(54291),o=function(e,a){return s.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:a,icon:r}))};o.displayName="MinusCircleOutlined";const c=s.forwardRef(o)},30914:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t(89752).Z}}]);
//# sourceMappingURL=238.bfa36e3c.chunk.js.map